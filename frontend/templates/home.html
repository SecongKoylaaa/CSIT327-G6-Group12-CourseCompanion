{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Course Companion</title>
  <link rel="stylesheet" href="{% static 'css/home.css' %}">
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="nav-left">
      <h2>Course Companion</h2>
    </div>

    <div class="nav-center">
      <input type="text" placeholder="Search Course Companion..." class="search-bar">
    </div>

    <div class="nav-right">
      <button class="create-btn">+ Create</button>
      <div class="profile-icon">üë§</div>
    </div>
  </nav>

  <div class="main-content">
    <!-- LEFT: POSTS -->
    <div class="posts-section">
      {% for post in posts %}
      <div class="post">
        <p><b>{{ post.course }}</b> ‚Ä¢ {{ post.created_at }}</p>
        <h3>{{ post.title }}</h3>

        {% if post.description %}
          <p class="post-description">{{ post.description }}</p>
        {% endif %}

        {% if post.is_image %}
          <img src="{{ post.url }}" alt="Post Image" class="post-thumbnail">
        {% elif post.is_video %}
          <video class="post-thumbnail" src="{{ post.url }}" controls></video>
        {% elif post.url %}
          <a href="{{ post.url }}" target="_blank">{{ post.url }}</a>
        {% endif %}

        <div class="actions">
          <span>‚¨ÜÔ∏è 15</span>
          <span class="comment-toggle" onclick="toggleComments(this)">üí¨ 22</span>
          <span>üîó Share</span>
        </div>

        <!-- Expanded view (hidden by default) -->
        <div class="expanded-section">
          <div class="expanded-media">
            {% if post.is_image %}
              <img src="{{ post.url }}" alt="Expanded Post Image">
            {% elif post.is_video %}
              <video src="{{ post.url }}" controls></video>
            {% endif %}
          </div>

          <div class="comments-area">
            <h4>Comments</h4>

            <div class="comment">
              <strong>user123</strong> <span>‚Ä¢ 2h ago</span>
              <p>Nice post!</p>
            </div>

            <div class="comment">
              <strong>janedoe</strong> <span>‚Ä¢ 1h ago</span>
              <p>Can you share your notes?</p>
            </div>

            <form class="comment-form" method="POST">
              {% csrf_token %}
              <input type="text" name="comment" placeholder="Add a comment..." required>
              <button type="submit">Post</button>
            </form>
          </div>
        </div>
      </div>
      {% empty %}
        <p>No posts available.</p>
      {% endfor %}
    </div>

    <!-- RIGHT: GROUPS -->
    <div class="groups-section">
      <h3>Groups</h3>
      <ul>
        <li>r/Psychology</li>
        <li>r/HowToProgramming</li>
        <li>r/ThisIsATest</li>
        <li>r/HelloWorld</li>
        <li>r/Nursing</li>
        <li>r/Engineering</li>
      </ul>
    </div>
  </div>

  <script>
  function toggleComments(el) {
    const post = el.closest(".post");
    post.classList.toggle("show-expanded");
  }
  </script>
</body>
</html>
